document.addEventListener("DOMContentLoaded",function(){const e=document.querySelectorAll(".video-wrapper"),t=e=>{e&&"0"!==e.style.opacity&&(e.style.opacity="0",setTimeout(()=>e.remove(),600))},o=(e,o,a)=>{e.muted=!0;const n=e.play();void 0!==n&&n.then(()=>{o&&(o.style.display="none"),a&&(a.style.display="none"),e.style.display="block",e.readyState>=3?t(o):e.addEventListener("playing",()=>t(o),{once:!0})}).catch(()=>{e.setAttribute("controls",!0),e.classList.add("needs-play-button"),o&&(o.style.display="block"),a&&(a.style.display="block"),e.style.display="none",a?.addEventListener("click",()=>{e.style.display="block",o&&(o.style.display="none"),a.style.display="none",e.removeAttribute("controls"),e.controls=!1,e.play()},{once:!0})})},a=new IntersectionObserver(e=>{e.forEach(e=>{if(!e.isIntersecting)return;const t=e.target,a=t.querySelector("video"),n=t.querySelector(".video-fallback-img"),l=t.querySelector(".video-play-btn");a.dataset.autoplayHandled||(a.dataset.autoplayHandled=!0,o(a,n,l))})},{threshold:.6});e.forEach(e=>{const t=e.querySelector("video");if(!t)return;const n=e.querySelector(".video-fallback-img"),l=e.querySelector(".video-play-btn"),s=t.classList.contains("video-hero"),r=t.classList.contains("media-item");s?(o(t,n,l),t.dataset.autoplayHandled=!0):r&&a.observe(e)}),function(){const e=performance.getEntriesByType("navigation")[0]?.type;"back_forward"!==e&&document.querySelectorAll("video.reset-on-load").forEach(e=>{e.pause(),e.currentTime=0})}()});